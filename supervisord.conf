[supervisord]
nodaemon=true
user=root
logfile=/opt/ivms/logs/supervisord.log
pidfile=/var/run/supervisord.pid

[program:dbus]
command=/usr/bin/dbus-daemon --system --nofork
priority=5
autorestart=true
stdout_logfile=/opt/ivms/logs/dbus.log
stderr_logfile=/opt/ivms/logs/dbus.err.log

[program:xvfb]
command=/usr/bin/Xvfb :10 -screen 0 1920x1080x24 -ac
priority=8
autorestart=true
stdout_logfile=/opt/ivms/logs/xvfb.log
stderr_logfile=/opt/ivms/logs/xvfb.err.log

[program:browser-desktop]
command=/bin/bash -lc 'su - ivms -c /usr/local/bin/start-browser-desktop.sh'
priority=9
autorestart=true
stdout_logfile=/opt/ivms/logs/browser-desktop.log
stderr_logfile=/opt/ivms/logs/browser-desktop.err.log

[program:x11vnc]
command=/usr/bin/x11vnc -display :10 -forever -shared -rfbport 5900 -nopw -xkb -ncache 10
priority=10
autorestart=true
stdout_logfile=/opt/ivms/logs/x11vnc.log
stderr_logfile=/opt/ivms/logs/x11vnc.err.log

[program:novnc]
command=/usr/bin/websockify --web /usr/share/novnc/ 6080 localhost:5900
priority=11
autorestart=true
stdout_logfile=/opt/ivms/logs/novnc.log
stderr_logfile=/opt/ivms/logs/novnc.err.log

[program:xrdp-sesman]
command=/usr/sbin/xrdp-sesman --nodaemon
priority=20
autorestart=true
stdout_logfile=/opt/ivms/logs/xrdp-sesman.log
stderr_logfile=/opt/ivms/logs/xrdp-sesman.err.log

[program:xrdp]
command=/usr/sbin/xrdp --nodaemon
priority=21
autorestart=true
stdout_logfile=/opt/ivms/logs/xrdp.log
stderr_logfile=/opt/ivms/logs/xrdp.err.log
